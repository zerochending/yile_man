<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">
<sqlMap namespace="user"> 
	
	 <resultMap class="com.yile.man.index.vo.User" id="user">
		 <result property="id" column="id"></result>
		 <result property="loginName" column="loginName"></result>
		 <result property="userName" column="userName"></result>
		 <result property="idetify" column="idetify"></result>
		 <result property="loginTime" column="loginTime"></result>
		 <result property="deptment" column="deptment"></result>
		 <result property="loginCount" column="loginCount"></result>
		 <result property="loginIp" column="loginIp"></result>
    </resultMap>

  <insert id="insert"  parameterClass="com.yile.man.index.vo.User">
	   insert into yl.user (loginName,userName,idetify,loginTime,deptment,loginCount,loginIp,pwd) values
	    (#loginName#,#userName#,#idetify#,#loginTime#,#deptment#,#loginCount#,#loginIp#,#pwd#)
	    <selectKey resultClass="int" keyProperty="id">
		   SELECT LAST_INSERT_ID()
		</selectKey>
	</insert> 

	<select id="query"  parameterClass="com.yile.man.index.vo.Page" resultMap="user">
	   select id,loginName,userName,idetify,loginTime,deptment,loginCount,loginIp from yl.user limit #pageNo#,#pageSize# 
	</select> 
	
	<select id="dup"  parameterClass="com.yile.man.index.vo.User" resultClass="int">
	   select count(1) from yl.user where loginName=#loginName#
	</select> 
	
	<select id="total"  resultClass="int">
	   select count(1) from yl.user
	</select> 

   <delete id="delete"  parameterClass="int">
	   delete from  yl.user where id=#id#
	</delete> 
	
	<update id="update"  parameterClass="com.yile.man.index.vo.User">
	    update yl.user 
	    <dynamic prepend="set">  
		    <isNotNull prepend="," property="loginName">  
		        loginName = #loginName#  
		    </isNotNull>  
		   <isNotNull prepend="," property="userName">  
		     userName = #userName#  
		   </isNotNull>  
		   <isNotNull prepend="," property="idetify">  
		     idetify = #idetify#  
		   </isNotNull>  
		    <isNotNull prepend="," property="deptment">  
		     deptment = #deptment#  
		   </isNotNull> 
		    <isNotNull prepend="," property="loginCount">  
		     loginCount = #loginCount#  
		   </isNotNull>  
		     <isNotNull prepend="," property="loginTime">  
		     loginTime = #loginTime#  
		   </isNotNull>   
		    <isNotNull prepend="," property="loginIp">  
		     loginIp = #loginIp#  
		   </isNotNull>   
		    <isNotNull prepend="," property="pwd">  
		     pwd = #pwd#  
		   </isNotNull>   
        </dynamic>   
        where id=#id#
	</update> 
	
	<delete id="deleteBatch"  parameterClass="list">
      delete      
      from  yl.user 
      where id in    
      <iterate conjunction="," open="(" close=")">
        #[]#
      </iterate>
    </delete>
	
</sqlMap>
